# CertWarden API Client Configuration with Separate API Keys

# Base URL of the CertWarden instance
base_url: "https://certwarden.example.com"

# Global API headers (applied to all requests)
api:
  headers:
    Content-Type: "application/json"

# Output configuration
output:
  directory: "./certificates"
  filename_template: "{common_name}_{cert_id}"
  extensions:
    certificate: ".crt"
    private_key: ".key"
    chain: "_chain.pem"
    combined: "_combined.pem"

# Default options
defaults:
  format: "pem"
  expiry_alert_days: 30

# Actions global setting
actions:
  enabled: true

# Certificate groups to retrieve
certificates:
  # Group 1: Production web server certificates
  production_web_servers:
    method: "individual"
    format: "pem"
    # Certificate-specific API keys
    cert_secret: "examplekey_notvalid_cert123"  # API key for certificate operations
    key_secret: "examplekey_notvalid_key456"    # API key for private key operations
    certificates:
      - "example.com"
      - "api.example.com"
    output:
      directory: "./certificates/production"
    # Action to run after certificate retrieval
    action:
      command: "cp {certificate} {private_key} /etc/nginx/ssl/ && systemctl reload nginx"
      run_on: "new"  # Only run for new certificates
  
  # Group 2: Wildcard certificates
  wildcard_certificates:
    method: "search"
    format: "pem"
    # Certificate-specific API keys
    cert_secret: "examplekey_notvalid_cert789"  # API key for certificate operations
    key_secret: "examplekey_notvalid_key101"    # API key for private key operations
    query: "*.example.com"
    output:
      directory: "./certificates/wildcard"
    # Action to run after certificate retrieval
    action:
      command: "cp {combined} /etc/haproxy/ssl/ && systemctl reload haproxy"
      run_on: "all"  # Run for all certificates
  
  # Group 3: Expiring certificates
  expiring_certificates:
    method: "expiring"
    format: "pem"
    # Certificate-specific API keys
    cert_secret: "examplekey_notvalid_cert202"  # API key for certificate operations
    key_secret: "examplekey_notvalid_key303"    # API key for private key operations
    days: 30
    output:
      directory: "./certificates/expiring"
    # Action to run after certificate retrieval
    action:
      command: "echo 'Certificate {common_name} ({cert_id}) expiring soon' | mail -s 'Certificate Expiration Warning' admin@example.com"
      run_on: "all"

